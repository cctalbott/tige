package com.build.main {	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.display.Loader;	import flash.display.DisplayObject;	import flash.display.DisplayObjectContainer;	/*import flash.geom.Transform;	import flash.geom.ColorTransform;*/	import flash.events.Event;	import flash.events.MouseEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.URLVariables;	import flash.net.sendToURL;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFieldAutoSize;	import flash.text.AntiAliasType;	import fl.controls.TextInput;	import ContactFormMCClass;		public class ContactFormClass extends Sprite {		private var _theForm:Sprite = new Sprite();		private var _formObject:ContactFormMCClass = new ContactFormMCClass();		private var _alertText:TextField = new TextField();		private var _alertFormat:TextFormat = new TextFormat();				public function ContactFormClass():void {			_alertFormat.color = 0xFF3300;			_alertFormat.font = "Univers 65 Bold";			_alertFormat.size = 12;			_alertText.embedFonts = true;			_alertText.autoSize = TextFieldAutoSize.LEFT			_alertText.antiAliasType = AntiAliasType.ADVANCED;			_alertText.defaultTextFormat = _alertFormat;			_alertText.selectable = false;			_alertText.mouseEnabled = false;			_alertText.x = 514;			_alertText.y = 100;			this.addEventListener(Event.ADDED_TO_STAGE, thisAdded, false, 0, true);			_formObject.gotoAndPlay(1);		}		private function thisAdded(event:Event):void {			_theForm.name = "_theForm";			_alertText.name = "_alertText";			_theForm.x = 210;			_theForm.y = 60;			_theForm.addChild(_formObject);			this.parent.parent.parent.parent.addChild(_theForm);			try {				_formObject.getChildByName("submitBtn").addEventListener(MouseEvent.CLICK, submitClicked, false, 0, true);			} catch(e:TypeError) {				//nada			}			MovieClip(_formObject.getChildByName("contactBackBtnMC")).buttonMode = true;			MovieClip(_formObject.getChildByName("contactBackBtnMC")).addEventListener(MouseEvent.CLICK, backClicked, false, 0, true);		}		private function backClicked(event:MouseEvent):void {			_formObject.gotoAndStop(1);			try {				_formObject.removeChild(_alertText);			} catch(e:TypeError) {				// nada			} catch(e:ArgumentError) {				// nada			}			_theForm.removeChild(_formObject);			this.parent.parent.parent.parent.removeChild(_theForm);			MovieClip(_formObject.getChildByName("contactBackBtnMC")).removeEventListener(MouseEvent.CLICK, backClicked, false);			this.parent.removeChild(this);		}		private function submitClicked(event:MouseEvent):void {			var theForm:ContactFormMCClass = ContactFormMCClass(event.target.parent);			var mainTimeline:Object = this.parent.parent;			var contactUrl:String = "http://tige.com/build/buildcontacttest.php";			var contactRequest:URLRequest = new URLRequest(contactUrl);            var contactVars:URLVariables = new URLVariables();			contactVars.model = mainTimeline._model;			// exterior \\			contactVars.deck = mainTimeline._colorNames[mainTimeline._deckColor];			if(mainTimeline._model == "Z1" || mainTimeline._model == "RZ2" || mainTimeline._model == "RZ4") {				contactVars.deckAccent = mainTimeline._colorNames[mainTimeline._deckAccentColor];			} else {				if(mainTimeline._vescheme == "flex") {					contactVars.deckAccent = mainTimeline._colorNames[mainTimeline._deckAccentColor];				}			}			contactVars.hull = mainTimeline._colorNames[mainTimeline._hullColor];			contactVars.mainPanel = mainTimeline._colorNames[mainTimeline._mainPanelColor];			if(mainTimeline._model != "Z1") {				contactVars.secondPanel = mainTimeline._colorNames[mainTimeline._secondPanelColor];			}			contactVars.swimPlatform = mainTimeline._colorNames[mainTimeline._swimPlatformColor];			// graphic \\			if(mainTimeline._model == "RZ4" || mainTimeline._model == "RZ2") {				contactVars.graphic = mainTimeline._rzGraphicName;				if(mainTimeline._rzGraphicName == "freeride") {					contactVars.freerideAft = mainTimeline._colorNames[mainTimeline._freerideAftColor];					contactVars.freerideBow = mainTimeline._colorNames[mainTimeline._freerideBowColor];				}			} else if(mainTimeline._model == "Z1") {				contactVars.graphic = mainTimeline._z1GraphicName;				if(mainTimeline._z1GraphicName == "freeride") {					contactVars.freerideAft = mainTimeline._colorNames[mainTimeline._freerideAftColor];					contactVars.freerideBow = mainTimeline._colorNames[mainTimeline._z1FreerideBowColor];				}			} else {				contactVars.graphic = mainTimeline._veGraphicName;			}			// interior \\			contactVars.intPkg = mainTimeline._intPkgColor;			contactVars.accentVinyl = mainTimeline._colorNames[mainTimeline._accentVinylColor];			contactVars.accentTexture = mainTimeline._accentTextureName;			if(mainTimeline._model != "22i" && mainTimeline._model != "20V" && mainTimeline._model != "20i") {				contactVars.dashAccent = mainTimeline._colorNames[mainTimeline._dashAccentColor];			}			if(TextInput(theForm.getChildByName("fname")).length && TextInput(theForm.getChildByName("lname")).length && TextInput(theForm.getChildByName("email")).length && TextInput(theForm.getChildByName("zip")).length) {				try {					_formObject.removeChild(_alertText);				} catch(e:TypeError) {					// nada				} catch(e:ArgumentError) {					// nada				}				contactVars.fname = TextInput(theForm.getChildByName("fname")).text;				contactVars.lname = TextInput(theForm.getChildByName("lname")).text;				contactVars.email = TextInput(theForm.getChildByName("email")).text;				if(TextInput(theForm.getChildByName("phone")).length) {					contactVars.phone = TextInput(theForm.getChildByName("phone")).text;				}				if(TextInput(theForm.getChildByName("city")).length) {					contactVars.city = TextInput(theForm.getChildByName("city")).text;				}				if(TextInput(theForm.getChildByName("state")).length) {					contactVars._state = TextInput(theForm.getChildByName("state")).text;				}				contactVars.zip = TextInput(theForm.getChildByName("zip")).text;				contactRequest.data = contactVars;				trace("sendToURL: " + contactRequest.url + "?" + contactRequest.data);				try {					sendToURL(contactRequest);					_formObject.gotoAndPlay(2);				} catch(e:Error) {					_formObject.gotoAndPlay(3);				}			} else {				_formObject.addChild(_alertText);				_alertText.text = "";				if(!TextInput(theForm.getChildByName("fname")).length) {					_alertText.appendText("Please enter your first name.\n");				}				if(!TextInput(theForm.getChildByName("lname")).length) {					_alertText.appendText("Please enter your last name.\n");				}				if(!TextInput(theForm.getChildByName("email")).length) {					_alertText.appendText("Please enter your e–mail address.\n");				}				if(!TextInput(theForm.getChildByName("zip")).length) {					_alertText.appendText("Please enter your postal/zip code.\n");				}				_alertText.appendText("");			}		}	}}