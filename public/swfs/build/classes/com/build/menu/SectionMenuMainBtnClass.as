package com.build.menu {	import flash.display.Sprite;	import flash.display.Shape;	import SectMenuArrowClass;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFieldAutoSize;	import flash.text.AntiAliasType;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.geom.Transform;	import flash.geom.ColorTransform;	import flash.net.LocalConnection;		public class SectionMenuMainBtnClass extends Sprite {		private var _content:Sprite = new Sprite;		private var _btnHolder:Sprite = new Sprite;		private var _arrow:SectMenuArrowClass = new SectMenuArrowClass();		private var _mainFormat:TextFormat = new TextFormat();		private var _mainTxt:TextField = new TextField();				public function SectionMenuMainBtnClass(theTxt:String) 		{			init(theTxt);		}				private function init(theTxt:String):void 		{			_mainFormat.color = 0xFF6600;			//_mainFormat.font = "Univers 65 Bold";			_mainFormat.font = "Arial Black";			_mainFormat.size = 12;			_mainTxt.embedFonts = true;			_mainTxt.autoSize = TextFieldAutoSize.LEFT			_mainTxt.antiAliasType = AntiAliasType.ADVANCED;			_mainTxt.defaultTextFormat = _mainFormat;			_mainTxt.selectable = false;			_mainTxt.mouseEnabled = false;			_mainTxt.text = theTxt;						this.buttonMode = true;						_content.x = 9;			_content.y = 11;						addChild(_content);						_content.addEventListener(Event.ADDED_TO_STAGE, contentAdded, false, 0, true);			addEventListener(MouseEvent.CLICK, btnClicked, false, 0, true);		}				private function contentAdded(event:Event):void 		{			_content.addChild(_btnHolder);						_btnHolder.addEventListener(Event.ADDED_TO_STAGE, btnAdded, false, 0, true);			_content.removeEventListener(Event.ADDED_TO_STAGE, contentAdded, false);		}				private function btnAdded(event:Event):void 		{			_btnHolder.addChild(_mainTxt);						_arrow.x = _mainTxt.width + 10;			_arrow.y = (_mainTxt.height/2 + _mainTxt.y) - 1;						if(event.target.parent.parent.name == "_exterior") 			{				_arrow.rotation = 90;			}						_btnHolder.addChild(_arrow);						_btnHolder.removeEventListener(Event.ADDED_TO_STAGE, btnAdded, false);		}				private function btnClicked(event:MouseEvent):void 		{			resetArrow();						var mainTimeline:Object = event.currentTarget.parent.parent;			var theEvent:Object = event.currentTarget;			/*var graphicSection:SectionMenuMainBtnClass = SectionMenuMainBtnClass(SectionMenuClass(event.target.parent.parent.parent).getChildByName("_graphic"));			var interiorSection:SectionMenuMainBtnClass = SectionMenuMainBtnClass(SectionMenuClass(event.target.parent.parent.parent).getChildByName("_interior"));*/			var theArrow:SectMenuArrowClass = SectMenuArrowClass(Sprite(Sprite(theEvent.getChildAt(0)).getChildAt(0)).getChildAt(1));			var extLine:Shape = Shape(Sprite(SectionMenuLinesClass(theEvent.parent.getChildByName("_lines")).getChildAt(0)).getChildAt(1));			var graphicLine:Shape = Shape(Sprite(SectionMenuLinesClass(theEvent.parent.getChildByName("_lines")).getChildAt(0)).getChildAt(2));			var interiorLine:Shape = Shape(Sprite(SectionMenuLinesClass(theEvent.parent.getChildByName("_lines")).getChildAt(0)).getChildAt(3));						theArrow.rotation = 90;						switch(theEvent.name) 			{				case "_exterior":					//theEvent.parent.addChild(SectionMenuClass(theEvent.parent)._exteriorSections);					theEvent.parent.getChildByName("_exteriorSections").visible = true;					theEvent.parent.getChildByName("_interiorSections").visible = false;										if(mainTimeline._model == "RZR")					{					  extLine.y = 30;  					graphicLine.y = 30;  					interiorLine.y = 30;					  					  theEvent.parent.getChildByName("_graphic").y = 195;  					theEvent.parent.getChildByName("_interior").y = 233;					}					else if(mainTimeline._model == "R20")					{					  extLine.y = 30;  					graphicLine.y = 30;  					interiorLine.y = 30;					  					  theEvent.parent.getChildByName("_graphic").y = 195;  					theEvent.parent.getChildByName("_interior").y = 233;					}					else					{ 					  extLine.y = 0;  					graphicLine.y = 0;  					interiorLine.y = 0;  										  theEvent.parent.getChildByName("_graphic").y = 145;  					theEvent.parent.getChildByName("_interior").y = 183;					}										mainTimeline._section = "s1";					mainTimeline.sectionSwitch();										var extParent:SectionMenuSecondaryBtnClass = SectionMenuSecondaryBtnClass(event.currentTarget.parent.getChildByName("_exteriorSections").getChildByName("_deck"));					extParent.removeExtListeners();										var extTxt:TextField = TextField(Sprite(Sprite(extParent.getChildAt(0)).getChildAt(0)).getChildAt(0));					var extColorInfo:ColorTransform = extTxt.transform.colorTransform;					extColorInfo.color = 0xFF6600;					extTxt.transform.colorTransform = extColorInfo;					break;				case "_graphic":					theEvent.parent.getChildByName("_exteriorSections").visible = false;					theEvent.parent.getChildByName("_interiorSections").visible = false;										//if(mainTimeline._model == "RZR")					//{					//  extLine.y = -70;					//  graphicLine.y = -35;					//  interiorLine.y = -35;				  //}				  //else				  //{				    extLine.y = -100;					  graphicLine.y = -65;					  interiorLine.y = -65;				  //}									theEvent.y = 35;					theEvent.parent.getChildByName("_interior").y = 109;					mainTimeline._section = "s8";					mainTimeline.sectionSwitch();					break;				case "_interior":					theEvent.parent.getChildByName("_exteriorSections").visible = false;					theEvent.parent.getChildByName("_interiorSections").visible = true;					extLine.y = -100;					graphicLine.y = -100;					interiorLine.y = -30;					theEvent.y = 74;					theEvent.parent.getChildByName("_graphic").y = 35;					mainTimeline._section = "s9";					mainTimeline.sectionSwitch();										var intParent:SectionMenuSecondaryBtnClass = SectionMenuSecondaryBtnClass(event.currentTarget.parent.getChildByName("_interiorSections").getChildByName("_baseInterior"));					intParent.removeIntListeners();										var intTxt:TextField = TextField(Sprite(Sprite(SectionMenuSecondaryBtnClass(Sprite(theEvent.parent.getChildByName("_interiorSections")).getChildByName("_baseInterior")).getChildAt(0)).getChildAt(0)).getChildAt(0));					var intColorInfo:ColorTransform = intTxt.transform.colorTransform;					intColorInfo.color = 0xFF6600;					intTxt.transform.colorTransform = intColorInfo;					break;				default:			}		}				private function resetArrow():void 		{			var theArray:Array = new Array();						theArray.push("_exterior");			theArray.push("_graphic");			theArray.push("_interior");						for(var i:uint=0; i < theArray.length; i++) 			{				var theArrow:SectMenuArrowClass = SectMenuArrowClass(Sprite(Sprite(SectionMenuMainBtnClass(this.parent.getChildByName(theArray[i])).getChildAt(0)).getChildAt(0)).getChildAt(1));								theArrow.rotation = 0;			}		}	}}